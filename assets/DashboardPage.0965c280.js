import{Q as A}from"./QPage.f9102ef5.js";import{u as Q}from"./user.e1c30541.js";import{a as d,c as L,y as S,B as H,E as K,h as s,ah as W,d as G,ai as J,o as X,aj as Y,r as Z,ak as ee,G as te,H as le,al as B,am as ne,an as ae,m as ie,ag as j,_ as p,L as y,M as I,N as g,O as o,Q as h,T as oe,ao as re,R as D,S as N,ap as se,aq as ue,K as T,U as E,W as ce,V as de,ar as ve,J as me,C as fe}from"./index.c8a8fcf2.js";import{u as ge}from"./use-quasar.79e417c6.js";import"./axios.d363f6e4.js";const he={ratio:[String,Number]};function we(e,i){return d(()=>{const a=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}const _e=16/9;var be=L({name:"QImg",props:{...he,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:_e},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:a}){const r=S(e.initialRatio),m=we(e,r);let n=null,v=!1;const c=[S(null),S(t())],u=S(0),f=S(!1),w=S(!1),q=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),R=d(()=>({width:e.width,height:e.height})),C=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),k=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));H(()=>$(),b);function $(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function t(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function b(l){n!==null&&(clearTimeout(n),n=null),w.value=!1,l===null?(f.value=!1,c[u.value^1].value=t()):f.value=!0,c[u.value].value=l}function P({target:l}){v!==!0&&(n!==null&&(clearTimeout(n),n=null),r.value=l.naturalHeight===0?.5:l.naturalWidth/l.naturalHeight,U(l,1))}function U(l,x){v===!0||x===1e3||(l.complete===!0?F(l):n=setTimeout(()=>{n=null,U(l,x+1)},50))}function F(l){v!==!0&&(u.value=u.value^1,c[u.value].value=null,f.value=!1,w.value=!1,a("load",l.currentSrc||l.src))}function O(l){n!==null&&(clearTimeout(n),n=null),f.value=!1,w.value=!0,c[u.value].value=null,c[u.value^1].value=t(),a("error",l)}function V(l){const x=c[l].value,z={key:"img_"+l,class:C.value,style:k.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...x};return u.value===l?(z.class+=" q-img__image--waiting",Object.assign(z,{onLoad:P,onError:O})):z.class+=" q-img__image--loaded",s("div",{class:"q-img__container absolute-full",key:"img"+l},s("img",z))}function M(){return f.value!==!0?s("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},G(i[w.value===!0?"error":"default"])):s("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[s(J,{color:e.spinnerColor,size:e.spinnerSize})])}return b($()),K(()=>{v=!0,n!==null&&(clearTimeout(n),n=null)}),()=>{const l=[];return m.value!==null&&l.push(s("div",{key:"filler",style:m.value})),w.value!==!0&&(c[0].value!==null&&l.push(V(0)),c[1].value!==null&&l.push(V(1))),l.push(s(W,{name:"q-transition--fade"},M)),s("div",{class:q.value,style:R.value,role:"img","aria-label":e.alt},l)}}});const Se={xs:8,sm:10,md:14,lg:20,xl:24};var _=L({name:"QChip",props:{...X,...Y,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:i,emit:a}){const{proxy:{$q:r}}=le(),m=Z(e,r),n=ee(e,Se),v=d(()=>e.selected===!0||e.icon!==void 0),c=d(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),u=d(()=>e.iconRemove||r.iconSet.chip.remove),f=d(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),w=d(()=>{const t=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(t?` text-${t} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(f.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(m.value===!0?" q-chip--dark q-dark":"")}),q=d(()=>{const t=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},b={...t,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:t,remove:b}});function R(t){t.keyCode===13&&C(t)}function C(t){e.disable||(a("update:selected",!e.selected),a("click",t))}function k(t){(t.keyCode===void 0||t.keyCode===13)&&(ie(t),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function $(){const t=[];f.value===!0&&t.push(s("div",{class:"q-focus-helper"})),v.value===!0&&t.push(s(B,{class:"q-chip__icon q-chip__icon--left",name:c.value}));const b=e.label!==void 0?[s("div",{class:"ellipsis"},[e.label])]:void 0;return t.push(s("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ne(i.default,b))),e.iconRight&&t.push(s(B,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&t.push(s(B,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:u.value,...q.value.remove,onClick:k,onKeyup:k})),t}return()=>{if(e.modelValue===!1)return;const t={class:w.value,style:n.value};return f.value===!0&&Object.assign(t,q.value.chip,{onClick:C,onKeyup:R}),te("div",t,$(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ae,e.ripple]])}}});const ye=j({name:"UserEventCard",props:{event:{type:Object,required:!0},deleteFunc:{required:!0}}}),qe={class:"tw-flex tw-flex-col tw-w-full"},Ce={class:"tw-flex tw-align-middle tw-w-full"},ke={class:"tw-block tw-text-2xl tw-p-4 tw-font-light"},$e={class:"tw-pl-3 tw-pb-2 tw-mt-auto tw-mb-0"};function xe(e,i,a,r,m,n){return y(),I(ue,{class:"event tw-w-full tw-rounded-xl tw-my-3"},{default:g(()=>[o(se,{horizontal:""},{default:g(()=>[o(be,{class:"tw-w-1/6",src:"https://cdn.quasar.dev/img/mountains.jpg"}),h("div",qe,[h("div",Ce,[h("h3",ke,oe(e.event.title),1)]),h("div",$e,[o(_,{outline:"",square:"",color:"red","text-color":"white",label:"City: "+e.event.city,size:"sm"},null,8,["label"]),o(_,{outline:"",square:"",color:"red","text-color":"white",label:"Venue: "+e.event.venue,size:"sm"},null,8,["label"]),o(_,{outline:"",square:"",color:"red","text-color":"white",label:"Hosts: "+e.event.hosts,size:"sm"},null,8,["label"]),o(_,{outline:"",square:"",color:"red","text-color":"white",label:"Date: "+new Date(e.event.event_date).toDateString(),size:"sm"},null,8,["label"]),o(_,{outline:"",square:"",color:"red","text-color":"white",label:"Time: "+new Date(e.event.event_date).toLocaleTimeString("en-us",{hour:"2-digit",minute:"2-digit"}),size:"sm"},null,8,["label"]),o(_,{outline:"",square:"",color:"red","text-color":"white",label:"Created: "+new Date(e.event.created).toDateString(),size:"sm"},null,8,["label"]),o(_,{outline:"",square:"",color:"red","text-color":"white",label:"Last updated: "+new Date(e.event.updated).toDateString(),size:"sm"},null,8,["label"])])]),o(re,{class:"tw-flex tw-w-1/3 tw-justify-end tw-px-4"},{default:g(()=>[o(D,{flat:"",color:"primary"},{default:g(()=>[N("Edit")]),_:1}),o(D,{flat:"",color:"accent"},{default:g(()=>[N("Preview")]),_:1}),o(D,{flat:"",outlined:"",color:"secondary",onClick:i[0]||(i[0]=v=>e.deleteFunc(e.event.id))},{default:g(()=>[N("Delete")]),_:1})]),_:1})]),_:1})]),_:1})}var ze=p(ye,[["render",xe]]);const Be=j({name:"UserEvents",components:{UserEventCard:ze},setup(){const e=Q(),i=d(()=>e.events),a=ge(),{deleteUserEvent:r}=Q();function m(n){a.dialog({title:"Confirm",message:"Do you want to delete the event?",cancel:!0,persistent:!0}).onOk(()=>{r(n)})}return{events:i,deleteEvent:m}}}),De={class:"tw-w-full tw-mt-8"},Ne={class:"tw-flex tw-align-middle"},Re=h("h1",{class:"tw-inline-block tw-leading-normal tw-font-light"},"Events",-1),Ee=h("hr",{class:"tw-my-4"},null,-1),Qe={class:"events tw-w-full"},Te={key:0,class:"tw-text-gray-400 tw-font-light tw-w-full tw-text-center tw-my-auto tw-h-full tw-block tw-text-2xl"};function je(e,i,a,r,m,n){const v=T("router-link"),c=T("user-event-card");return y(),E("div",De,[h("div",Ne,[Re,o(v,{class:"tw-ml-auto tw-mr-0 tw-my-1",to:{name:"create-event"}},{default:g(()=>[o(D,{outline:"",size:"md",color:"accent"},{default:g(()=>[o(B,{class:"tw-mr-1",name:"add"}),N("New event")]),_:1})]),_:1})]),Ee,h("div",Qe,[(y(!0),E(ce,null,de(e.events,u=>(y(),I(c,{event:u,key:u.id,deleteFunc:e.deleteEvent},null,8,["event","deleteFunc"]))),128)),e.events.length==0?(y(),E("h2",Te," No events to display ")):ve("",!0)])])}var pe=p(Be,[["render",je]]);const Ie=j({name:"IndexPage",components:{UserEvents:pe},setup(){const e=Q(),{fetchCurrentUser:i,fetchUserEvents:a}=e,r=me();return fe(()=>{if(!e.access_token){r.push({path:"/login"});return}i(),a()}),{store:e}}});function Ue(e,i,a,r,m,n){const v=T("user-events");return y(),I(A,{class:"tw-w-9/12 tw-mx-auto tw-p-4 row"},{default:g(()=>[o(v)]),_:1})}var Me=p(Ie,[["render",Ue]]);export{Me as default};
